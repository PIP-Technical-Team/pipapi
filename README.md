
<!-- README.md is generated from README.Rmd. Please edit that file -->

# pipapi

<!-- badges: start -->
<!-- [![Codecov test coverage](https://codecov.io/gh/PIP-Technical-Team/pipapi/branch/master/graph/badge.svg)](https://codecov.io/gh/PIP-Technical-Team/pipapi?branch=master) -->

[![R-CMD-check](https://github.com/PIP-Technical-Team/pipapi/workflows/check-release/badge.svg)](https://github.com/PIP-Technical-Team/pipapi/actions)
[![test-coverage](https://github.com/PIP-Technical-Team/pipapi/workflows/test-coverage/badge.svg)](https://github.com/PIP-Technical-Team/pipapi/actions)
[![pkgdown](https://github.com/PIP-Technical-Team/pipapi/workflows/pkgdown/badge.svg)](https://github.com/PIP-Technical-Team/pipapi/actions)
<!-- badges: end -->

The goal of pipapi is to provide a high level API to the computations
and methods that power the Poverty and Inequality Platform (PIP).

World Bank staff who have read access to the PIP data can use the
functions from this package directly (without hitting the PIP API)

## Installation

You can install the development version from
[GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("PIP-Technical-Team/pipapi")
```

## Getting started

The main function from the `pipapi` package is the `pip()` function. See
`?pip` for more information.

### Data access

In order to use the `pip()` you’ll need to have access to PIP
`data_folder`. The folder structure looks like this:

``` bash
data-folder-root/
├─ _aux/
│  ├─ pop-regions.fst
│  ├─ pop.fst
├─ estimations/
│  ├─ survey_means.fst
│  ├─ interpolated_means.fst
│  ├─ dist_stats.fst
├─ survey_data/
│  ├─ survey_1.fst
│  ├─ ...
│  ├─ survey_n.fst
```

``` r
# Create a list of look-up tables from the root data folder
lkups <- pipapi:::clean_api_data(
  data_folder_root = "path/to/data_folder")
```

    #> List of 8
    #>  $ svy_lkup      :Classes 'data.table' and 'data.frame': 17 obs. of  28 variables:
    #>   ..$ survey_id              : chr [1:17] "AGO_2000_HBS_V01_M_V01_A_PIP_PC-GPWG" "ARE_2014_HIES_V01_M_V01_A_PIP_PC-GROUP" "ARG_1986_EPH_V01_M_V01_A_PIP_PC-HIST" "BDI_1992_EDCM_V01_M_V01_A_PIP_PC-GROUP" ...
    #>   ..$ cache_id               : chr [1:17] "AGO_2000_HBS_D1_CON_GPWG" "ARE_2014_HIES_D1_INC_GROUP" "ARG_1986_EPH_D1_INC_HIST" "BDI_1992_EDCM_D1_CON_GROUP" ...
    #>   ..$ wb_region_code         : chr [1:17] "SSA" "MNA" "LAC" "SSA" ...
    #>   ..$ pcn_region_code        : chr [1:17] "SSA" "OHI" "LAC" "SSA" ...
    #>   ..$ country_code           : chr [1:17] "AGO" "ARE" "ARG" "BDI" ...
    #>   ..$ survey_acronym         : chr [1:17] "HBS" "HIES" "EPH" "EDCM" ...
    #>   ..$ survey_coverage        : chr [1:17] "national" "national" "urban" "national" ...
    #>   ..$ survey_comparability   : num [1:17] 0 0 0 0 0 0 0 0 0 0 ...
    #>   ..$ surveyid_year          : num [1:17] 2000 2014 1986 1992 1981 ...
    #>   ..$ reporting_year         : num [1:17] 2000 2013 1986 1992 1981 ...
    #>   ..$ survey_year            : num [1:17] 2000 2013 1986 1992 1981 ...
    #>   ..$ welfare_type           : chr [1:17] "consumption" "income" "income" "consumption" ...
    #>   ..$ survey_mean_lcu        : num [1:17] 11.2326 6.1787 5.3478 2.3917 0.0411 ...
    #>   ..$ survey_mean_ppp        : num [1:17] 4.1 2.5085 24.8472 0.0454 0.0765 ...
    #>   ..$ reporting_pop          : num [1:17] 1.64e+07 9.20e+06 3.07e+07 5.69e+06 7.94e+08 ...
    #>   ..$ ppp                    : num [1:17] 80.93 2.4 3.16 496.12 3.04 ...
    #>   ..$ cpi                    : num [1:17] 0.0339 1.0277 0.0681 0.1061 0.1769 ...
    #>   ..$ pop_data_level         : chr [1:17] "national" "national" "national" "national" ...
    #>   ..$ gdp_data_level         : chr [1:17] "national" "national" "national" "national" ...
    #>   ..$ pce_data_level         : chr [1:17] "national" "national" "national" "national" ...
    #>   ..$ cpi_data_level         : chr [1:17] "national" "national" "national" "national" ...
    #>   ..$ ppp_data_level         : chr [1:17] "national" "national" "national" "national" ...
    #>   ..$ distribution_type      : chr [1:17] "micro" "group" "micro" "group" ...
    #>   ..$ gd_type                : chr [1:17] "" "T05" "" "T05" ...
    #>   ..$ is_interpolated        : logi [1:17] FALSE FALSE FALSE FALSE FALSE FALSE ...
    #>   ..$ is_used_for_aggregation: logi [1:17] FALSE FALSE FALSE FALSE TRUE TRUE ...
    #>   ..$ comparable_spell       : chr [1:17] "2000" "2013 - 2018" "1980 - 1987" "1992" ...
    #>   ..$ path                   : chr [1:17] "./tests/testdata/20210401/survey_data/AGO_2000_HBS_D1_CON_GPWG.fst" "./tests/testdata/20210401/survey_data/ARE_2014_HIES_D1_INC_GROUP.fst" "./tests/testdata/20210401/survey_data/ARG_1986_EPH_D1_INC_HIST.fst" "./tests/testdata/20210401/survey_data/BDI_1992_EDCM_D1_CON_GROUP.fst" ...
    #>   ..- attr(*, ".internal.selfref")=<externalptr> 
    #>  $ ref_lkup      :Classes 'data.table' and 'data.frame': 164 obs. of  31 variables:
    #>   ..$ survey_id              : chr [1:164] "THA_1981_SES_V01_M_V01_A_PIP_PC-GROUP" "AGO_2000_HBS_V01_M_V01_A_PIP_PC-GPWG" "EGY_1995_HIECS_V01_M_V01_A_PIP_PC-GROUP" "NPL_1984_MHBS_V01_M_V01_A_PIP_PC-GROUP" ...
    #>   ..$ cache_id               : chr [1:164] "THA_1981_SES_D1_CON_GROUP" "AGO_2000_HBS_D1_CON_GPWG" "EGY_1995_HIECS_D1_CON_GROUP" "NPL_1984_MHBS_D1_INC_GROUP" ...
    #>   ..$ wb_region_code         : chr [1:164] "EAP" "SSA" "MNA" "SAR" ...
    #>   ..$ pcn_region_code        : chr [1:164] "EAP" "SSA" "MNA" "SAS" ...
    #>   ..$ country_code           : chr [1:164] "THA" "AGO" "EGY" "NPL" ...
    #>   ..$ reporting_year         : int [1:164] 1984 1995 1996 1986 1997 2009 1998 1992 1999 2010 ...
    #>   ..$ surveyid_year          : num [1:164] 1981 2000 1995 1984 1995 ...
    #>   ..$ survey_year            : num [1:164] 1981 2000 1996 1984 1996 ...
    #>   ..$ survey_acronym         : chr [1:164] "SES" "HBS" "HIECS" "MHBS" ...
    #>   ..$ survey_coverage        : chr [1:164] "national" "national" "national" "national" ...
    #>   ..$ survey_comparability   : num [1:164] 0 0 0 0 0 0 0 1 0 0 ...
    #>   ..$ welfare_type           : chr [1:164] "consumption" "consumption" "consumption" "income" ...
    #>   ..$ survey_mean_lcu        : num [1:164] 0.81 11.233 0.142 0.164 0.142 ...
    #>   ..$ survey_mean_ppp        : num [1:164] 0.1807 4.1 0.1416 0.0504 0.1416 ...
    #>   ..$ predicted_mean_ppp     : num [1:164] 0.1835 3.5836 0.1433 0.0525 0.151 ...
    #>   ..$ ppp                    : num [1:164] 12.76 80.93 2.87 25.74 2.87 ...
    #>   ..$ reporting_pop          : num [1:164] 51094868 13945206 63601629 17239673 64892270 ...
    #>   ..$ reporting_gdp          : num [1:164] 1622 1931 1707 325 1765 ...
    #>   ..$ reporting_pce          : num [1:164] 984 NA 1404 NA 1434 ...
    #>   ..$ pop_data_level         : chr [1:164] "national" "national" "national" "national" ...
    #>   ..$ gdp_data_level         : chr [1:164] "national" "national" "national" "national" ...
    #>   ..$ pce_data_level         : chr [1:164] "national" "national" "national" "national" ...
    #>   ..$ cpi_data_level         : chr [1:164] "national" "national" "national" "national" ...
    #>   ..$ ppp_data_level         : chr [1:164] "national" "national" "national" "national" ...
    #>   ..$ distribution_type      : chr [1:164] "group" "micro" "group" "group" ...
    #>   ..$ gd_type                : chr [1:164] "T01" "" "T02" "T01" ...
    #>   ..$ is_interpolated        : logi [1:164] TRUE TRUE TRUE TRUE TRUE TRUE ...
    #>   ..$ is_used_for_aggregation: logi [1:164] FALSE FALSE FALSE FALSE FALSE FALSE ...
    #>   ..$ estimation_type        : chr [1:164] "interpolation" "extrapolation" "interpolation" "extrapolation" ...
    #>   ..$ comparable_spell       : chr [1:164] "2008 - 1984" "1995 - 1989" "2004 - 2003" "2015 - 2004" ...
    #>   ..$ path                   : chr [1:164] "./tests/testdata/20210401/survey_data/THA_1981_SES_D1_CON_GROUP.fst" "./tests/testdata/20210401/survey_data/AGO_2000_HBS_D1_CON_GPWG.fst" "./tests/testdata/20210401/survey_data/EGY_1995_HIECS_D1_CON_GROUP.fst" "./tests/testdata/20210401/survey_data/NPL_1984_MHBS_D1_INC_GROUP.fst" ...
    #>   ..- attr(*, ".internal.selfref")=<externalptr> 
    #>  $ dist_stats    :Classes 'data.table' and 'data.frame': 12 obs. of  28 variables:
    #>   ..$ survey_id        : chr [1:12] "AGO_2000_HBS_V01_M_V01_A_PIP_PC-GPWG" "ARE_2014_HIES_V01_M_V01_A_PIP_PC-GROUP" "ARG_1986_EPH_V01_M_V01_A_PIP_PC-HIST" "BDI_1992_EDCM_V01_M_V01_A_PIP_PC-GROUP" ...
    #>   ..$ cache_id         : chr [1:12] "AGO_2000_HBS_D1_CON_GPWG" "ARE_2014_HIES_D1_INC_GROUP" "ARG_1986_EPH_D1_INC_HIST" "BDI_1992_EDCM_D1_CON_GROUP" ...
    #>   ..$ wb_region_code   : chr [1:12] "SSA" "MNA" "LAC" "SSA" ...
    #>   ..$ pcn_region_code  : chr [1:12] "SSA" "OHI" "LAC" "SSA" ...
    #>   ..$ country_code     : chr [1:12] "AGO" "ARE" "ARG" "BDI" ...
    #>   ..$ survey_acronym   : chr [1:12] "HBS" "HIES" "EPH" "EDCM" ...
    #>   ..$ surveyid_year    : num [1:12] 2000 2014 1986 1992 1989 ...
    #>   ..$ survey_year      : num [1:12] 2000 2013 1986 1992 1989 ...
    #>   ..$ reporting_year   : num [1:12] 2000 2013 1986 1992 1989 ...
    #>   ..$ welfare_type     : chr [1:12] "consumption" "income" "income" "consumption" ...
    #>   ..$ pop_data_level   : chr [1:12] "national" "national" "national" "national" ...
    #>   ..$ survey_median_lcu: num [1:12] 7.105 5.556 3.858 1.943 0.245 ...
    #>   ..$ survey_median_ppp: num [1:12] 2.5934 2.2555 17.9229 0.0369 0.163 ...
    #>   ..$ decile1          : num [1:12] 0.00983 0.0235 0.01768 0.03414 0.01663 ...
    #>   ..$ decile2          : num [1:12] 0.022 0.0386 0.0336 0.0453 0.0253 ...
    #>   ..$ decile3          : num [1:12] 0.0334 0.0531 0.0435 0.0555 0.0344 ...
    #>   ..$ decile4          : num [1:12] 0.045 0.0674 0.0552 0.0654 0.0445 ...
    #>   ..$ decile5          : num [1:12] 0.0566 0.0822 0.0667 0.0758 0.0559 ...
    #>   ..$ decile6          : num [1:12] 0.0705 0.0982 0.0798 0.0872 0.0695 ...
    #>   ..$ decile7          : num [1:12] 0.0881 0.1164 0.0974 0.101 0.087 ...
    #>   ..$ decile8          : num [1:12] 0.113 0.138 0.121 0.12 0.112 ...
    #>   ..$ decile9          : num [1:12] 0.159 0.168 0.163 0.15 0.157 ...
    #>   ..$ decile10         : num [1:12] 0.402 0.214 0.322 0.266 0.398 ...
    #>   ..$ mean             : num [1:12] 11.233 6.179 5.348 2.392 0.393 ...
    #>   ..$ gini             : num [1:12] 0.52 0.325 0.428 0.333 0.505 ...
    #>   ..$ polarization     : num [1:12] 0.464 0.323 0.385 0.282 0.457 ...
    #>   ..$ mld              : num [1:12] 0.513 0.195 0.311 0.182 0.447 ...
    #>   ..$ problem          : chr [1:12] "AGO_2000_HBS_D1_CON_GPWG-national" "ARE_2014_HIES_D1_INC_GROUP-national" "ARG_1986_EPH_D1_INC_HIST-national" "BDI_1992_EDCM_D1_CON_GROUP-national" ...
    #>   ..- attr(*, ".internal.selfref")=<externalptr> 
    #>  $ pop_region    :Classes 'data.table' and 'data.frame': 308 obs. of  4 variables:
    #>   ..$ region_code  : chr [1:308] "OHI" "OHI" "OHI" "OHI" ...
    #>   ..$ year         : num [1:308] 1977 1978 1979 1980 1981 ...
    #>   ..$ pop          : num [1:308] 1.64e+09 1.65e+09 1.67e+09 1.68e+09 1.69e+09 ...
    #>   ..$ grouping_type: chr [1:308] "WB" "WB" "WB" "WB" ...
    #>   ..- attr(*, ".internal.selfref")=<externalptr> 
    #>  $ cp_lkups      :List of 2
    #>   ..$ key_indicators:List of 6
    #>   .. ..$ headcount_national:Classes 'data.table' and 'data.frame':   156 obs. of  3 variables:
    #>   .. .. ..$ country_code      : chr [1:156] "AFG" "AGO" "ALB" "ARG" ...
    #>   .. .. ..$ reporting_year    : int [1:156] 2016 2018 2012 2019 2019 2018 2012 2013 2018 2019 ...
    #>   .. .. ..$ headcount_national: num [1:156] 54.5 32.3 14.3 35.5 26.4 13.3 6 64.9 14.8 38.5 ...
    #>   .. .. ..- attr(*, ".internal.selfref")=<externalptr> 
    #>   .. ..$ mpm_headcount     :Classes 'data.table' and 'data.frame':   138 obs. of  3 variables:
    #>   .. .. ..$ country_code  : chr [1:138] "AGO" "ALB" "ARG" "ARM" ...
    #>   .. .. ..$ reporting_year: int [1:138] 2018 2017 2019 2019 2014 2018 2013 2018 2015 2014 ...
    #>   .. .. ..$ mpm_headcount : num [1:138] 0.57971 0.0153 0.01486 0.01079 0.00985 ...
    #>   .. .. ..- attr(*, ".internal.selfref")=<externalptr> 
    #>   .. ..$ population        :Classes 'data.table' and 'data.frame':   263 obs. of  3 variables:
    #>   .. .. ..$ country_code  : chr [1:263] "ABW" "AFG" "AGO" "ALB" ...
    #>   .. .. ..$ reporting_year: int [1:263] 2019 2019 2019 2019 2019 2019 2019 2019 2019 2019 ...
    #>   .. .. ..$ population    : num [1:263] 0.1063 38.0418 31.8253 2.8542 0.0771 ...
    #>   .. .. ..- attr(*, ".internal.selfref")=<externalptr> 
    #>   .. ..$ gni               :Classes 'data.table' and 'data.frame':   502 obs. of  3 variables:
    #>   .. .. ..$ country_code  : chr [1:502] "ABW" "ABW" "AFG" "AFG" ...
    #>   .. .. ..$ reporting_year: int [1:502] 2016 2017 2018 2019 2018 2019 2018 2019 2018 2019 ...
    #>   .. .. ..$ gni           : num [1:502] 26560 26810 520 530 3210 ...
    #>   .. .. ..- attr(*, ".internal.selfref")=<externalptr> 
    #>   .. ..$ gdp               :Classes 'data.table' and 'data.frame':   516 obs. of  3 variables:
    #>   .. .. ..$ country_code  : chr [1:516] "ABW" "ABW" "AFG" "AFG" ...
    #>   .. .. ..$ reporting_year: int [1:516] 2016 2017 2018 2019 2018 2019 2018 2019 2018 2019 ...
    #>   .. .. ..$ gdp_growth    : num [1:516] 2.1 2 1.19 3.91 -2 ...
    #>   .. .. ..- attr(*, ".internal.selfref")=<externalptr> 
    #>   .. ..$ shared_prosperity :Classes 'data.table' and 'data.frame':   121 obs. of  4 variables:
    #>   .. .. ..$ country_code  : chr [1:121] "ALB" "ARG" "ARM" "AUS" ...
    #>   .. .. ..$ year_range    : chr [1:121] "2014-2017" "2013-2018" "2013-2018" "2003-2010" ...
    #>   .. .. ..$ share_below_40: num [1:121] 2.47 -1.56 1.26 4.3 1.44 ...
    #>   .. .. ..$ share_total   : num [1:121] 0.818 -1.482 2.4 4.613 1.196 ...
    #>   .. .. ..- attr(*, ".internal.selfref")=<externalptr> 
    #>   .. .. ..- attr(*, "sorted")= chr [1:2] "country_code" "year_range"
    #>   ..$ charts        :List of 4
    #>   .. ..$ ineq_trend:Classes 'data.table' and 'data.frame':   1775 obs. of  6 variables:
    #>   .. .. ..$ country_code    : chr [1:1775] "AGO" "AGO" "AGO" "ALB" ...
    #>   .. .. ..$ reporting_year  : int [1:1775] 2000 2008 2018 1996 2002 2005 2008 2012 2014 2015 ...
    #>   .. .. ..$ welfare_type    : chr [1:1775] "consumption" "consumption" "consumption" "consumption" ...
    #>   .. .. ..$ comparable_spell: chr [1:1775] "2000" "2008" "2018" "1996" ...
    #>   .. .. ..$ gini            : num [1:1775] 0.52 0.427 0.513 0.27 0.317 ...
    #>   .. .. ..$ theil           : num [1:1775] 0.546 0.333 0.614 NA 0.18 ...
    #>   .. .. ..- attr(*, ".internal.selfref")=<externalptr> 
    #>   .. ..$ ineq_bar  :Classes 'data.table' and 'data.frame':   3234 obs. of  7 variables:
    #>   .. .. ..$ country_code  : chr [1:3234] "AGO" "AGO" "AGO" "AGO" ...
    #>   .. .. ..$ reporting_year: int [1:3234] 2018 2018 2018 2018 2018 2018 2018 2018 2018 2018 ...
    #>   .. .. ..$ gender        : chr [1:3234] "" "" "" "" ...
    #>   .. .. ..$ agegroup      : chr [1:3234] "0-14" "0-14" "15-64" "15-64" ...
    #>   .. .. ..$ education     : chr [1:3234] "" "" "" "" ...
    #>   .. .. ..$ distribution  : chr [1:3234] "B40" "T60" "B40" "T60" ...
    #>   .. .. ..$ poverty_share : num [1:3234] 0.458 0.542 0.339 0.661 0.349 ...
    #>   .. .. ..- attr(*, ".internal.selfref")=<externalptr> 
    #>   .. ..$ mpm       :Classes 'data.table' and 'data.frame':   265 obs. of  10 variables:
    #>   .. .. ..$ country_code            : chr [1:265] "AGO" "ALB" "ALB" "ARG" ...
    #>   .. .. ..$ reporting_year          : int [1:265] 2018 2012 2017 2014 2018 2019 2013 2018 2019 2014 ...
    #>   .. .. ..$ welfare_type            : chr [1:265] "consumption" "consumption" "consumption" "income" ...
    #>   .. .. ..$ mpm_education_attainment: num [1:265] 0.29753 0.02271 0.00331 0.01418 0.01339 ...
    #>   .. .. ..$ mpm_education_enrollment: num [1:265] 0.27443 0.06731 NA 0.00949 0.00737 ...
    #>   .. .. ..$ mpm_electricity         : num [1:265] 0.5264 0.00497 0.00131 0 0 ...
    #>   .. .. ..$ mpm_sanitation          : num [1:265] 0.53638 0.0304 0.06976 0.00399 0.00546 ...
    #>   .. .. ..$ mpm_water               : num [1:265] 0.32107 0.00343 0.0927 0.00406 0.00264 ...
    #>   .. .. ..$ mpm_monetary            : num [1:265] 0.49906 0.0085 0.01267 0.00929 0.01354 ...
    #>   .. .. ..$ mpm_headcount           : num [1:265] 0.57971 0.01022 0.0153 0.00951 0.01402 ...
    #>   .. .. ..- attr(*, ".internal.selfref")=<externalptr> 
    #>   .. ..$ sp        :Classes 'data.table' and 'data.frame':   1648 obs. of  5 variables:
    #>   .. .. ..$ country_code     : chr [1:1648] "ALB" "ALB" "ALB" "ALB" ...
    #>   .. .. ..$ year_range       : chr [1:1648] "2008-2012" "2008-2012" "2008-2012" "2008-2012" ...
    #>   .. .. ..$ welfare_type     : chr [1:1648] "consumption" "consumption" "consumption" "consumption" ...
    #>   .. .. ..$ distribution     : chr [1:1648] "b40" "tot" "m50" "premium" ...
    #>   .. .. ..$ shared_prosperity: num [1:1648] -1.2202 -1.314 -0.4695 0.0938 2.469 ...
    #>   .. .. ..- attr(*, ".internal.selfref")=<externalptr> 
    #>  $ pl_lkup       :Classes 'data.table' and 'data.frame': 130 obs. of  4 variables:
    #>   ..$ name        : chr [1:130] "0.05" "0.1" "0.15" "0.2" ...
    #>   ..$ poverty_line: num [1:130] 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 0.45 0.5 ...
    #>   ..$ is_default  : logi [1:130] FALSE FALSE FALSE FALSE FALSE FALSE ...
    #>   ..$ is_visible  : logi [1:130] FALSE FALSE FALSE FALSE FALSE FALSE ...
    #>   ..- attr(*, ".internal.selfref")=<externalptr> 
    #>  $ query_controls:List of 12
    #>   ..$ country        :List of 2
    #>   .. ..$ values: chr [1:12] "all" "AGO" "ARE" "ARG" ...
    #>   .. ..$ type  : chr "character"
    #>   ..$ year           :List of 2
    #>   .. ..$ values: chr [1:41] "all" "mrv" "1981" "1982" ...
    #>   .. ..$ type  : chr "character"
    #>   ..$ povline        :List of 2
    #>   .. ..$ values: Named num [1:2] 0 100
    #>   .. .. ..- attr(*, "names")= chr [1:2] "min" "max"
    #>   .. ..$ type  : chr "numeric"
    #>   ..$ popshare       :List of 2
    #>   .. ..$ values: Named num [1:2] 0 1
    #>   .. .. ..- attr(*, "names")= chr [1:2] "min" "max"
    #>   .. ..$ type  : chr "numeric"
    #>   ..$ fill_gaps      :List of 2
    #>   .. ..$ values: logi [1:2] TRUE FALSE
    #>   .. ..$ type  : chr "logical"
    #>   ..$ aggregate      :List of 2
    #>   .. ..$ values: logi [1:2] TRUE FALSE
    #>   .. ..$ type  : chr "logical"
    #>   ..$ group_by       :List of 2
    #>   .. ..$ values: chr [1:2] "none" "wb"
    #>   .. ..$ type  : chr "character"
    #>   ..$ welfare_type   :List of 2
    #>   .. ..$ values: chr [1:3] "all" "consumption" "income"
    #>   .. ..$ type  : chr "character"
    #>   ..$ reporting_level:List of 2
    #>   .. ..$ values: chr [1:4] "all" "national" "rural" "urban"
    #>   .. ..$ type  : chr "character"
    #>   ..$ ppp            :List of 2
    #>   .. ..$ values: Named num [1:2] 0e+00 1e+06
    #>   .. .. ..- attr(*, "names")= chr [1:2] "min" "max"
    #>   .. ..$ type  : chr "numeric"
    #>   ..$ version        : 'fs_path' Named chr [1:3] "./tests/testdata/20210401/estimations" "./tests/testdata/20210401/survey_data" "./tests/testdata/20210401/_aux"
    #>   .. ..- attr(*, "names")= chr [1:3] "./tests/testdata/20210401/estimations" "./tests/testdata/20210401/survey_data" "./tests/testdata/20210401/_aux"
    #>   ..$ format         :List of 2
    #>   .. ..$ values: chr [1:3] "json" "csv" "rds"
    #>   .. ..$ type  : chr "character"
    #>  $ data_root     : chr "./tests/testdata/20210401/"

### Run package functions

Pass the `lkups` list to the main `pip()` function to compute poverty
and inequality statistics in your `R` session.

``` r
library(pipapi)

pip(country = "AGO",
    year = 2000,
    povline = 1.9,
    lkup = lkups)
#>                    cache_id country_code reporting_year welfare_type
#> 1: AGO_2000_HBS_D1_CON_GPWG          AGO           2000  consumption
#>    pop_data_level   median      gini polarization       mld    decile1
#> 1:       national 2.593394 0.5195689    0.4643401 0.5125765 0.00983246
#>       decile2    decile3    decile4    decile5    decile6    decile7   decile8
#> 1: 0.02195307 0.03342455 0.04495307 0.05662774 0.07048758 0.08808485 0.1134946
#>     decile9  decile10                            survey_id wb_region_code
#> 1: 0.158687 0.4024552 AGO_2000_HBS_V01_M_V01_A_PIP_PC-GPWG            SSA
#>    pcn_region_code survey_acronym survey_coverage survey_comparability
#> 1:             SSA            HBS        national                    0
#>    surveyid_year survey_year survey_mean_lcu survey_mean_ppp reporting_pop
#> 1:          2000     2000.21        11.23264        4.100014      16395473
#>        ppp        cpi gdp_data_level pce_data_level cpi_data_level
#> 1: 80.9318 0.03385145       national       national       national
#>    ppp_data_level distribution_type gd_type is_interpolated
#> 1:       national             micro                   FALSE
#>    is_used_for_aggregation comparable_spell
#> 1:                   FALSE             2000
#>                                                                  path
#> 1: ./tests/testdata/20210401/survey_data/AGO_2000_HBS_D1_CON_GPWG.fst
#>    poverty_line     mean headcount poverty_gap poverty_severity     watts
#> 1:          1.9 4.100014 0.3557108   0.1625061       0.09664022 0.2719677
```
